# RegScriptBox Constitutions  ## 1) Purpose This document is the single source of truth for identity, lineage, metadata, and registry standards in RegScriptBox.  ## 2) Glossary - CID: Category ID (human-readable classification) - SID: Section ID (job identity inside a file; no hash) - PYN: Python Artifact ID (file identity; includes hash + lineage hash) - Capability: concise verb phrase describing what a section does - Hash: stable fingerprint of normalized code text - Generation: 0 = original tool file; 1+ = extracted chunk files  ## 3) CID Constitution ### Format <ENV>.<NOUN>.<OBJECT>  ### Rules - ENV = domain boundary (WEB, FS, DOC, DB, API, SYS, AUTH, UI, BOT, TRADE, etc.) - NOUN = subsystem (DOC, PDF, MD, HTML, HTTP, SQLITE, CSV, ROUTE, etc.) - OBJECT = specific target (FETCH, PARSE, RENDER, INDEX, REGISTER, etc.) - Keep it short, consistent, and expandable.  ### Examples - WEB.DOC.PDF - WEB.DOC.MD - FS.FILE.COPY - DB.SQLITE.WRITE  ## 4) SID Constitution ### Definition SID means "same job". If two sections do the same job, they should converge to one SID after standardization.  ### Format <CID>|<CAPABILITY>|<ORD>  ### Notes - No hash in SID. - ORD is local order within the file (01, 02, 03â€¦). - CAPABILITY is a short verb phrase: render_pdf, write_markdown, read_config.  ### Examples - WEB.DOC.PDF|render_pdf|03 - WEB.DOC.MD|write_markdown|04  ## 5) PYN Constitution ### Definition File identity for standalone artifacts (tools or extracted chunk-files).  ### Format <PYN_KIND>-G<GEN>-<CID>-<HASH>-P<PARENT_HASH>  ### Rules - GEN 0 has no parent hash. - GEN 1+ must include parent hash (hash of parent PYN string, not parent code). - HASH is the code hash (normalized code body). - PARENT_HASH is the lineage pointer.  ## 6) Hash + Lineage Constitution ### Code Hash - Hash input is normalized:   - strip trailing whitespace   - normalize line endings   - optionally remove purely-comment-only lines if policy says so - Output is short form (e.g. first 12-16 chars) for headers, full stored in SQLite.  ### Lineage Hash - Store parent linkage as a hash of the parent PYN string. - Follow parent pointers to trace lineage back to GEN 0.  ## 7) Metadata Constitution Metadata is stored in SQLite (not bloated into headers). Minimum fields: - pyn - gen - cid - sid - capability - hash_full - parent_pyn_hash (nullable) - file_path - created_at - updated_at  ## 8) Registry (SQLite) Constitution SQLite is the ground-truth index. It records: - every file (PYN) - every section (SID) - hash collisions (identicals) - "same CID + same capability" candidates for merge review  ## 9) Annotator Constitution Annotator: - reads .py file - identifies sections - assigns CID/SID - computes hashes - writes registry entries - outputs annotated copy (never overwrites originals)  ## 10) Indexer Constitution Indexer: - crawls repo - updates sitemap/index from registry - keeps human navigation fast and LLM retrieval cheap  ## 11) Versioning + Archive Rules - Originals preserved under archive - Annotated outputs become canonical for new work - Merges create a new version (new hash, new PYN)  ## 12) Worked Examples (TBD)

